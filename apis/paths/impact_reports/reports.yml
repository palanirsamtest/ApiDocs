get:
  tags:
    - Impact Reports
  operationId: GetAllReports
  summary: >
    Get all reports
  description: Get all reports by org ID.
  parameters:
    - $ref: '../../components/parameters.yml#/orgIdParam'
  responses:
    200:
      description: OK.
      content:
        application/vnd.api+json:
          schema:
            $ref: '../../components/schemas.yml#/GetAllReportsResponse'
          example:
            data:
              - id: '2ed52026-bacd-4d30-be18-05ca2c9b0ff2'
                type: impact_reports
                attributes:
                  name: 'Critical Assets'
                  api_name: 'api name'
                  group_by: 'report_format'
                  query: 'query fetchAssetType($id: ID) {asset_type: data_table(id: $id) {query {rows totalRowCount}}}'
                  shared: true
                  engine: 'docxtemplater'
                  format: 'docx'
                  generate: 'docx'
                  csv_root: ''
                  signed_url: 'https://acl-impact-reports-api-us2-main-s3.s3.us-west-2.amazonaws.com/templates/1/700b6b7c-7b6a-4f2d-a1e1-f9ca62727492?AWSAccessKeyId=ASIA46554PY2UM56ODVW&Content-Type=application%2Fvnd.openxmlformats-officedocument.wordprocessingml.document&Expires=1621575926&Signature=VArl9Yx7u7K%2BKPfJLWJtmTlwWPQ%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEAYaCXVzLXdlc3QtMiJIMEYCIQCx06tpzLsWsuhYjwlwr2V4pvvFgi9kqSLYKMSQUQy6mQIhAMaNX4N4OZeMnn%2BH7Jx6IsjbyhLJZxSO6qqfdsOgnDWQKqUCCJ%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQAxoMODkxMDY3MDcyMDUzIgwLk8y8%2B%2BsEpu6CPTgq%2BQGhPkQ77N9O9riEwnxzKL70IP%2BRBZA%2F3UNvX7tW9nxMpFY8%2Fn%2BMtnieCFgIuBNL%2BW2LCs%2FMBK5d11Y2PzKjjDoO53MjJxYtgOS5dq8fPerm2iZ4rNAn7ZXc07P1NiZt7xOvXYKoxZrC6SxifARc7L%2FLxojR7qoxz6CttZTlNICbO1YwGU4ZPws%2B42pBuTYUwpjtjI2poEx0Jb%2FQOvPt%2BKrNMkDCwjFuXqH1r1ynnV%2BIIqQ96vAtqQca5qkIBpFasbb66HKt0Lby66KZXl%2BqaWmxAabolyf2E5UGIgBma9ldqwnfkshSXvx%2F%2FPTmRGhCNmi73bx3RnmBbrgwhoqdhQY6mQFb9cUhmVb1ay18sbxjUpKoXi4Gp6FGveqJFip%2Fm6YFFR673i7aoe3UU2G3l4pLd0k3iRYyHdWxurkfZ%2BHXT8Vc0K6Ly0OKFclxLH%2Ft%2BIvU2SQtzSCM%2Fkt4VaPlfps4xYopu9n53U2oJx2580J%2F8fPnBJsH%2F2GcbReEDcQL3JylPRKGeqpv4APQlTZGL4%2Bg%2FKHxUYs2SIRFFSg%3D'

              - id: '9ab51ab5-d9e5-4973-a653-902a13e2ba7e'
                type: impact_reports
                attributes:
                  name: 'Critical Assets 2'
                  api_name: 'api name'
                  group_by: 'report_format'
                  query: 'query fetchAssetType($id: ID, $symbolic_name: String) { data_table(id: $id, symbolic_name: $symbolic_name) { query { rows } }}'
                  shared: true
                  engine: 'csv'
                  format: 'csv'
                  generate: 'csv'
                  csv_root: ''
    400:
      $ref: '../../components/responses.yml#/MissingResourceId'
    401:
      $ref: '../../components/responses.yml#/BadCredentials'
    403:
      $ref: '../../components/responses.yml#/Forbidden'
    404:
      $ref: '../../components/responses.yml#/NotFound'

post:
  tags:
    - Impact Reports
  operationId: CreateReport
  summary: Create a report
  description: |
    Create a report.

    <strong>Limitations</strong>:
    * There can be a maximum of 1000 reports per HighBond org.

  parameters:
    - $ref: '../../components/parameters.yml#/orgIdParam'
  requestBody:
    description: The data required to update a report.
    required: true
    content:
      application/vnd.api+json:
        schema:
          $ref: '../../components/schemas.yml#/CreateReportRequest'
  responses:
    200:
      description: OK.
      content:
        application/vnd.api+json:
          schema:
            $ref: '../../components/schemas.yml#/CreateReportResponse'
    400:
      $ref: '../../components/responses.yml#/MissingResourceId'
    401:
      $ref: '../../components/responses.yml#/BadCredentials'
    403:
      $ref: '../../components/responses.yml#/Forbidden'
    422:
      $ref: '../../components/responses.yml#/InvalidReportData'
