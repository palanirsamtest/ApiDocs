EntityChildRelationship: &EntityChildRelationship
  type: object
  description: |
    Entity associated with a parent entity.

    >**Note**: only existing top-level entities can be assigned as children
  required:
    - id
    - type
  properties:
    id:
      type: string
      description: The ID of the entity.
      example: '3'
    type:
      type: string
      description: The classification of the object (`"entities"`).
      example: entities

EntityRelationships: &EntityRelationships
  type: object
  description: The relationships associated with the resource.
  properties:
    entity_category: &EntityCategoryRelationship
      type: object
      nullable: true
      description: |
        Each entity can be associated to the category.
      required:
        - data
      properties:
        data:
          type: object
          description: The data associated with the resource.
          required:
            - id
            - type
          properties:
            id:
              type: string
              description: The ID of the category.
              example: '54'
            type:
              type: string
              description: The classification of the object (`"entity_categories"`).
              example: entity_categories
    parent: &EntityParentRelationship
      type: object
      nullable: true
      description: |
        Each entity can be associated to the parent entity.
      required:
        - data
      properties:
        data:
          type: object
          description: The data associated with the resource.
          required:
            - id
            - type
          properties:
            id:
              type: string
              description: The ID of the entity.
              example: '1'
            type:
              type: string
              description: The classification of the object (`"entities"`).
              example: entities

EntityChildrenRelationship: &EntityChildrenRelationship
  type: object
  nullable: true
  description: |
    Each entity can have multiple associated entities.
  required:
    - data
  properties:
    data:
      type: array
      items: *EntityChildRelationship

Entity: &Entity
  type: object
  description: The data associated with the resource.
  required:
    - id
    - type
    - attributes
    - relationships
  properties:
    id: &id
      type: string
      description: The ID of the requested resource.
      example: '2'
    type: &type
      type: string
      description: The type of resource (`"entities"`).
      example: entities
    attributes:
      type: object
      description: The attributes associated with the resource.
      required:
        - title
      properties:
        title: &title
          type: string
          description: The title of the entity.
          maxLength: 120
          example: Entity title
        description: &description
          type: string
          description: A detailed description of the entity.
          maxLength: 524288
          example: Entity description
        children_count: &children_count
          type: integer
          description: A count of entity children.
          example: 1
        created_at: &created_at
          type: string
          description: The timestamp identifying when the entity was created.
          example: '2019-02-09T13:17:26Z'
          format: date-time
        updated_at: &updated_at
          type: string
          description: The timestamp identifying when the entity was last updated.
          example: '2019-02-09T13:17:26Z'
          format: date-time
    relationships: *EntityRelationships

EntityUpdateAttribute: &EntityUpdateAttribute
  type: object
  description: The attributes associated with the resource.
  required:
    - title
  properties:
    title: *title
    description: *description

Links: &Links
  type: object
  required:
    - next
    - prev
  properties:
    next:
      type: string
      description: Next page url
      nullable: true
      example: '/api/resource?page[number]=Mw=='
    prev:
      type: string
      description: Previous page url
      nullable: true
      example: null

GetEntityResponse:
  type: object
  required:
    - data
  properties:
    data: *Entity

GetEntitiesResponse:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: array
      items: *Entity
    links: *Links

CreateEntityRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - type
        - attributes
      properties:
        type: *type
        attributes: *EntityUpdateAttribute
        relationships:
          type: object
          description: The relationships associated with the resource.
          properties:
            entity_category: *EntityCategoryRelationship
            parent: *EntityParentRelationship
            children: *EntityChildrenRelationship

UpdateEntityRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - id
        - type
        - attributes
      properties:
        id: *id
        type: *type
        attributes: *EntityUpdateAttribute
        relationships:
          type: object
          description: The relationships associated with the resource.
          properties:
            entity_category: *EntityCategoryRelationship
            parent: *EntityParentRelationship
            children: *EntityChildrenRelationship
