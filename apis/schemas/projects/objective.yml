ObjectiveEntitiesRelationship: &ObjectiveEntitiesRelationship
  type: object
  description: Each objective has an associated objective entities.
  required:
    - data
  properties:
    data:
      type: array
      description: The data associated with the resource.
      items:
        type: object
        required:
          - id
          - type
        properties:
          id:
            type: string
            description: The ID of the entity.
            example: '1'
          type:
            type: string
            description: The classification of the object (`"entities"`).
            example: entities

EntitiesRelationship: &EntitiesRelationship
  type: object
  description: |
    The passed entities list should match the following conditions:
    1. It should be the full exact list of entities you would like to be linked to the resource.

    2. The passed entities should consist of valid sub-trees with all ancestor entities as well as descendent entities.

    3. Inherited entities should be included too.

    Otherwise, the whole request will be rejected with the corresponding error.
  properties:
    data:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            description: The ID of the entity.
            example: '1'
          type:
            type: string
            description: The classification of the object (`"entities"`).
            example: entities

ObjectiveEmptyEntitiesRelationship: &ObjectiveEmptyEntitiesRelationship
  type: object
  description: Each objective has an associated objective entities.
  required:
    - data
  properties:
    data:
      type: array
      example: []
      description: The data associated with the resource.
      items:
        type: object
        required:
          - id
          - type
        properties:
          id:
            type: string
            description: The ID of the entity.
            example: '1'
          type:
            type: string
            description: The classification of the object (`"entities"`).
            example: entities

ObjectiveRelationships: &ObjectiveRelationships
  type: object
  description: The relationships associated with the resource.
  required:
    - assigned_user
  properties:
    project: &ProjectRelationship
      type: object
      description: |
        Each objective has an associated project or framework. Project/framework is a management system that allows you to define and compile information
        for reporting purposes.
      required:
        - data
      properties:
        data:
          type: object
          description: The data associated with the resource.
          required:
            - id
            - type
          properties:
            id:
              type: string
              description: The ID of the project.
              example: '1'
            type:
              type: string
              description: The classification of the object (`"projects"`).
              example: projects
    framework: &FrameworkRelationship
      type: object
      description: |
        Each objective has an associated project or framework. Project/framework is a management system that allows you to define and compile information
        for reporting purposes.
      required:
        - data
      properties:
        data:
          type: object
          description: The data associated with the resource.
          required:
            - id
            - type
          properties:
            id:
              type: string
              description: The ID of the framework.
              example: '1'
            type:
              type: string
              description: The classification of the object (`"frameworks"`).
              example: frameworks
    framework_origin: &FrameworkOriginRelationship
      type: object
      description: |
        In the Projects app, a project `objective` can have a related counterpart in an associated framework. The `framework_origin` attribute allows you to associate an `objective` in a project with its related counterpart in a framework. Can be set only when `parent_resource_type` is `projects`.
      required:
        - data
      properties:
        data:
          type: object
          description: The data associated with the resource.
          required:
            - id
            - type
          properties:
            id:
              type: string
              description: The ID of the parent objective.
              example: '1'
            type:
              type: string
              description: The classification of the object (`"objectives"`).
              example: objectives
    assigned_user: &AssignedUserRelationship
      type: object
      description: |
        The person assigned to the objective. Only users assigned the Professional Manager or Professional User role in the project can be specified.
        The user specified receives an email notification with a link to the objective, is able to view the objective on the project dashboard,
        and has full read and write access to the objective.
      required:
        - data
      properties:
        data:
          type: object
          description: The data associated with the resource.
          required:
            - id
            - type
          properties:
            id:
              type: string
              description: |
                The unique identifier (UID) of the assigned user. For more information on obtaining this value, see
                <a href="#section/Making-requests">Making requests</a>.
              example: '3NQ6XzAUxqJMnAQ7n4KF'
            type:
              type: string
              description: The classification of the object (`"users"`).
              example: users

ObjectiveSparseRelationships: &ObjectiveSparseRelationships
  <<: *ObjectiveRelationships
  properties:
    project: *ProjectRelationship
    framework: *FrameworkRelationship
    framework_origin: *FrameworkOriginRelationship
    assigned_user: *AssignedUserRelationship
    entities: *ObjectiveEntitiesRelationship

ObjectiveEmptySparseRelationships: &ObjectiveEmptySparseRelationships
  <<: *ObjectiveRelationships
  properties:
    project: *ProjectRelationship
    framework: *FrameworkRelationship
    framework_origin: *FrameworkOriginRelationship
    assigned_user: *AssignedUserRelationship
    entities: *ObjectiveEmptyEntitiesRelationship

Objective: &Objective
  type: object
  description: The data associated with the resource.
  required:
    - id
    - type
    - attributes
    - relationships
  properties:
    id: &id
      type: string
      description: The ID of the requested resource.
      example: '1'
    type: &type
      type: string
      description: The classification of the object (`"objectives"`).
      example: objectives
    attributes: &attributes
      type: object
      description: The attributes associated with the resource.
      required:
        - title
        - reference
      properties:
        title: &title
          type: string
          description: The title of the objective.
          maxLength: 60
          example: Objective Title
        reference: &reference
          type: string
          description: The reference number or code for the objective.
          maxLength: 8
          example: ITC
        description: &description
          type: string
          description: A detailed description of the objective.
          example: Objective description
        division_department: &division_department
          type: string
          description: The division or department responsible for the objective.
          example: Finance
        owner: &owner
          type: string
          description: |
            The person responsible for the objective. Specifying a person's name or email does not automatically send them
            an email notification about the objective.
          example: thomas@sodor.ca
        executive_owner: &executive_owner
          type: string
          description: |
            The executive owner of the objective. Specifying a person's name or email does not automatically send them
            an email notification about the objective.
          example: henry@sodor.com
        position: &position
          type: integer
          format: int64
          description: |
            The value that determines the order in which it is displayed in the index action. `position` must be a value between `1` and `2147483647`.
          example: 1
        risk_control_matrix_id: &risk_control_matrix_id
          type: string
          description: The id of the risk control matrix.
          example: '100'
        walkthrough_summary_id: &walkthrough_summary_id
          type: string
          description: The id of the walkthrough summary.
          nullable: true
          example: '200'
        testing_round_1_id: &testing_round_1_id
          type: string
          description: The id of testing round 1 (if applicable).
          nullable: true
          example: '301'
        testing_round_2_id: &testing_round_2_id
          type: string
          description: The id of testing round 2 (if applicable).
          nullable: true
          example: '302'
        testing_round_3_id: &testing_round_3_id
          type: string
          description: The id of testing round 3 (if applicable).
          nullable: true
          example: '303'
        testing_round_4_id: &testing_round_4_id
          type: string
          description: The id of testing round 4 (if applicable).
          nullable: true
          example: '304'
        created_at: &created_at
          type: string
          description: The timestamp identifying when the objective was created.
          example: '2019-02-09T13:17:26Z'
          format: date-time
        updated_at: &updated_at
          type: string
          description: The timestamp identifying when the objective was last updated.
          example: '2019-02-09T13:17:26Z'
          format: date-time
        custom_attributes: &custom_attributes
          type: array
          description: An array of custom attributes defined on the project type used by the project this objective is from. <a href="https://help.highbond.com/helpdocs/highbond/en-us/Default.htm#cshid=pm-project-types" target="_blank">Learn more about project types</a>. Make a PATCH request to modify the value of a custom attribute.
          items:
            type: object
            description: A user defined custom attribute value.
            properties:
              id:
                type: string
                description: The ID of this custom attribute. Optional if term is included.
                example: '42'
              term:
                type: string
                description: The user defined term used to identify this custom attribute. Optional if id is included.
                example: 'Custom Objective Attribute'
              value:
                type: array
                description: The value or values (for multiselect) for this custom attribute.
                example: ['Custom Select Option Text']
                items:
                  type: string
        risk_assurance_data:
          type: object
          description: |
            Fields that determines assurance values. Assurance is an expression of confidence that risk is effectively mitigated. Returns `null` if Risk Assurance feature is disabled.
          properties:
            inherent_risk:
              type: number
              format: float
              description: |
                The risk that an activity would pose if no controls or other mitigating factors were in place. Can also be referred to as the gross risk, or risks before controls, and can act as the baseline for your organization's risk tolerance or appetite.
              example: 1.1
            residual_risk:
              type: number
              format: float
              description: |
                The risk that remains after controls are taken into account. Can also be referred to as the net risk or risk after controls.
              example: 1.1
            assurance:
              type: number
              description: |
                The level of assurance that the controls in place effectively mitigate risk to the business.
              example: 0
    relationships: *ObjectiveRelationships

ObjectiveWithSparseFieldset: &ObjectiveWithSparseFieldset
  <<: *Objective
  properties:
    id: *id
    type: *type
    attributes: *attributes
    relationships: *ObjectiveSparseRelationships

ObjectiveWithEmptySparseFieldset: &ObjectiveWithEmptySparseFieldset
  <<: *Objective
  properties:
    id: *id
    type: *type
    attributes: *attributes
    relationships: *ObjectiveEmptySparseRelationships

Links: &Links
  type: object
  required:
    - next
    - prev
  properties:
    next:
      type: string
      description: Next page url
      nullable: true
      example: '/api/resource?page[number]=Mg=='
    prev:
      type: string
      description: Previous page url
      nullable: true
      example: null

GetObjectivesResponse:
  type: object
  description: The data associated with the resource.
  required:
    - data
    - links
  properties:
    data:
      type: array
      items: *ObjectiveWithSparseFieldset
    links: *Links

GetObjectiveResponse:
  type: object
  description: The data associated with the resource.
  required:
    - data
    - links
  properties:
    data: *ObjectiveWithEmptySparseFieldset

GetObjectiveResponseWithIncludes:
  type: object
  description: The data included in the response.
  required:
    - data
  properties:
    data: *ObjectiveWithSparseFieldset

CreateObjectiveRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - type
        - attributes
        - relationships
      properties:
        type: *type
        attributes: &updatableAttributes
          type: object
          description: The attributes associated with the resource.
          required:
            - title
            - reference
          properties:
            title: *title
            reference: *reference
            description: *description
            division_department: *division_department
            owner: *owner
            executive_owner: *executive_owner
            position: *position
            custom_attributes: *custom_attributes
        relationships:
          type: object
          description: The relationships associated with the resource.
          required:
            - assigned_user
          properties:
            assigned_user: *AssignedUserRelationship
            framework_origin: *FrameworkOriginRelationship

UpdateObjectiveRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - id
        - type
        - attributes
      properties:
        id: *id
        type: *type
        attributes: *updatableAttributes
        relationships:
          type: object
          description: The relationships associated with the resource.
          properties:
            assigned_user: *AssignedUserRelationship
            entities: *EntitiesRelationship
            framework_origin: *FrameworkOriginRelationship

CreateObjectiveEntityRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - id
        - type
      properties:
        id:
          type: string
          description: The ID of the objective.
          example: '1'
        type:
          type: string
          description: The classification of the object (`"entities"`).
          example: entities

CreateObjectiveEntityResponse:
  type: object
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - id
        - type
      properties:
        id:
          type: string
          description: The ID of the objective.
          example: '1'
        type:
          type: string
          description: The classification of the object (`"entities"`).
          example: entities

ObjectiveAssetRelationships: &ObjectiveAssetRelationships
  type: object
  description: The relationships associated with the resource.
  required:
    - asset_type
  properties:
    asset_type:
      type: object
      description: |
        Each asset has an associated asset type.
      required:
        - data
      properties:
        data:
          type: object
          description: The data associated with the resource.
          required:
            - id
            - type
          properties:
            id:
              type: string
              description: The ID of the asset type.
              example: '1001'
            type:
              type: string
              description: The classification of the object (`"asset_types"`).
              example: asset_types

ObjectiveAsset: &ObjectiveAsset
  type: object
  description: The data associated with the resource.
  required:
    - id
    - type
    - relationships
  properties:
    id:
      type: string
      description: The ID of the requested resource.
      example: '1300694120267776'
    type:
      type: string
      description: The type of asset (`"assets"`).
      example: assets
    relationships: *ObjectiveAssetRelationships

GetObjectiveAssetsResponse:
  type: object
  required:
    - data
    - links
  properties:
    data:
      type: array
      description: Array of scoped assets
      items: *ObjectiveAsset
    links: *Links
