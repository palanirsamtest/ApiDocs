RequestItem: &RequestItem
  type: object
  description: The data associated with the resource.
  required:
    - id
    - type
    - attributes
    - relationships
  properties:
    id: &id
      type: string
      description: The ID of the requested resource.
      example: '1'
    type: &type
      type: string
      description: The classification of the object (`"request_items"`).
      example: request_items
    attributes:
      type: object
      description: The attributes associated with the resource.
      properties:
        description: &description
          type: string
          description: Describes the requested information, such as the document name, version number, or department where you might expect to find the information.
          maxLength: 524288
          example: <h1>Description heading</h1><p>Request item description.</p>
        created_at: &created_at
          type: string
          description: The timestamp identifying when the request item was created.
          example: '2019-02-09T13:17:26Z'
          format: date-time
        updated_at: &updated_at
          type: string
          description: The timestamp identifying when the request item was last updated.
          example: '2019-02-09T13:17:26Z'
          format: date-time
        owner: &owner
          type: string
          description: |
            Specifies the name of the person responsible for fulfilling the request.
            If the person is not a user or contact in a HighBond instance, you can provide a value in this field on create or update.
            This field becomes required if the `owner_user` relationship is not provided.
          example: 'Owner name'
        owner_email: &owner_email
          type: string
          format: email
          description: |
            Specifies the email of the person responsible for fulfilling the request.
            If the person is not a user or contact in a HighBond instance, you can provide a value in this field on create or update.
          example: 'owner_email@example.com'
        received: &received
          type: boolean
          description: |
            Specifies if the request item has been received (`true`) or if it is still open (`false`). The default is `false`.
            Request items cannot be updated once they have been received.
          example: false
        requestor: &requestor
          type: string
          description: |
            Specifies the name of the person requesting the documentation.
          example: 'Requestor name'
        due_date: &due_date
          type: string
          description: Specifies when the request should be fulfilled by.
          example: '2020-06-01'
          format: date
        send_recurrent_notifications: &send_recurrent_notifications
          type: boolean
          description: |
            Sends an email to the request owner and CC'ed persons on a specified recurring schedule.
            For more information about recurring reminders, see
            <a href="https://help.highbond.com/helpdocs/highbond/en-us/Content/projects/fieldwork/requests/sending_recurring_request_reminders.htm"
            target="_blank">Sending recurring request reminders</a>.
          example: false
        email_subject: &email_subject
          type: string
          description: Provides the ability to customize the email subject line.
          example: 'Email subject'
        email_message: &email_message
          type: string
          description: Provides the ability to customize the body of the email.
          example: 'Email message'
        position: &position
          type: integer
          description: |
            The value that determines the order in which it is displayed. `position` must be a value between `1` and `2147483647`.
          example: 1
        cc_contacts: &cc_contacts
          type: array
          description: |
            Specifies one or more people that can contribute to the request. A comma separated list of email addresses.
          nullable: true
          example: ['email_1@example.com', 'email_2@example.com']
          items:
            type: string
            format: email
    relationships:
      type: object
      description: The relationships associated with the resource.
      properties:
        project: &project
          type: object
          description: Specifies the project that the request item is associated with.
          properties:
            data:
              type: object
              description: The data associated with a project.
              properties:
                id:
                  type: string
                  description: The ID of the project.
                  example: '1'
                type:
                  type: string
                  description: The classification of the object (`"projects"`).
                  example: projects
        target: &target
          type: object
          nullable: true
          description: Specifies the resource that the request item is associated with.
          properties:
            data:
              type: object
              description: The data associated with a project.
              properties:
                id:
                  type: string
                  description: The ID of the resource.
                  example: '1'
                type:
                  type: string
                  description: |
                    The classification of the object.

                    A target can have one of the following types: `"projects"`, `"controls"`, `"control_tests"`,
                    `"control_test_plans"`, `"issues"`, `"narratives"`, `"objectives"`, `"walkthrough_summaries"`,
                    `"project_files"`, `"project_plannings"`, `"project_results"`, `"risks"`, `"risk_control_matrices"`,
                    `"testing_rounds"`, `"walkthroughs"`.
                  example: objectives
        owner_user: &owner_user
          type: object
          nullable: true
          description: |
            Specifies the user responsible for fulfilling the request.
            A value in this field will override any values provided in the `owner` and `owner_email` attributes.
            This field becomes required if the `owner` attribute is not provided.
          required:
            - data
          properties:
            data:
              type: object
              description: The data associated with the resource.
              required:
                - id
                - type
              properties:
                id:
                  type: string
                  description: |
                    The unique identifier (UID) of the user. For more information on obtaining this value, see
                    <a href="#section/Making-requests">Making requests</a>.
                  example: '3NQ6XzAUxqJMnAQ7n4KF'
                type:
                  type: string
                  description: The classification of the object (`"users"`).
                  example: users
        requestor_user: &requestor_user
          type: object
          description: |
            Specifies the user requesting the documentation.
          required:
            - data
          properties:
            data:
              type: object
              description: The data associated with the resource.
              required:
                - id
                - type
              properties:
                id:
                  type: string
                  description: |
                    The unique identifier (UID) of the user. For more information on obtaining this value, see
                    <a href="#section/Making-requests">Making requests</a>.
                  example: '3NQ6XzAUxqJMnAQ7n4KF'
                type:
                  type: string
                  description: The classification of the object (`"users"`).
                  example: users
        cc_users: &cc_users
          type: object
          nullable: true
          description: |
            Specifies one or more users in a HighBond instance that can contribute to the request.
          required:
            - data
          properties:
            data:
              type: array
              items:
                type: object
                description: The data associated with the resource.
                required:
                  - id
                  - type
                properties:
                  id:
                    type: string
                    description: |
                      The unique identifier (UID) of the user. For more information on obtaining this value, see
                      <a href="#section/Making-requests">Making requests</a>.
                    example: '3NQ6XzAUxqJMnAQ7n4KF'
                  type:
                    type: string
                    description: The classification of the object (`"users"`).
                    example: users

Links: &Links
  type: object
  required:
    - next
    - prev
  properties:
    next:
      type: string
      description: Next page url
      nullable: true
      example: '/api/resource?page[number]=Mw=='
    prev:
      type: string
      description: Previous page url
      nullable: true
      example: null

CreateRequestItemRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - type
        - attributes
        - relationships
      properties:
        type: *type
        attributes: &updatableAttributes
          type: object
          description: The attributes associated with the resource.
          required:
            - description
          properties:
            description: *description
            owner: *owner
            owner_email: *owner_email
            due_date: *due_date
            send_recurrent_notifications: *send_recurrent_notifications
            email_subject: *email_subject
            email_message: *email_message
            position: *position
            received: *received
            cc_contacts: *cc_contacts
        relationships: &updatableRelationships
          type: object
          description: The relationships associated with the resource.
          required:
            - requestor_user
          properties:
            target: *target
            requestor_user: *requestor_user
            owner_user: *owner_user
            cc_users: *cc_users

UpdateRequestItemRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      required:
        - id
        - type
        - attributes
        - relationships
      properties:
        id: *id
        type: *type
        attributes: *updatableAttributes
        relationships: *updatableRelationships

GetRequestItemResponse:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data: *RequestItem

GetOrgRequestItemsResponse:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: array
      items: *RequestItem
    links: *Links
