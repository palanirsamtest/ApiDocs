ChoiceQuestionItemType: &ChoiceQuestionItemType
  item_type:
    type: string
    maxLength: 255
    description: Specifies the type of the questionnaire item.
    enum:
      - SingleChoiceQuestion
      - MultipleChoiceQuestion
      - DropdownQuestion
    example: SingleChoiceQuestion
ChoiceQuestionBaseAttributes: &ChoiceQuestionBaseAttributes
  text:
    type: string
    description: The main text of the question.
    example: What's the best pet in the world?
  instructions:
    type: string
    description: The instructions for answering the question.
    example: Cat is the only right choice.
  column_text:
    type: string
    maxLength: 255
    description: The display name of the question when it appears in a table.
    example: Best pet
  optional:
    type: boolean
    description: Specifies whether the question is optional.
    default: false
    example: false
  position:
    type: integer
    format: int64
    description: |
      The position value determines the order of items within the questionnaire.

      e.g. position value of 2 will place the choice question as the second item in the questionnaire.

      If the value is not provided, the choice question will be appended to the end of the questionnaire.
    example: 4
  weight:
    type: integer
    description: Adds importance weight to choice question.
    example: 4
  reference_id:
    type: string
    description: Attribute for questions filtering
    example: Important Questions
  other_value:
    type: string
    description: |
      When spcified, respondents can provide an alternative answer if the available options do not apply to them.
      The text will be used as the label to this option.
    example: None of the above
  options:
    type: array
    description: |
      The options available to choose.

      Note:

      1. When updating the options of a choice question, HighBond will replace all existing options
      and their follow up questions with the new options provided in the upload payload.

      2. Follow-up questions must be existing (already created) questions.

      3. Follow-up questions cannot be another choice question which has its own follow-up questions.

      4. Follow-up questions cannot have more than one parent question.

      5.The reference_id must be unique for each option, if the reference_id value is not null.
    items:
      type: object
      required:
        - text
      properties:
        text:
          type: string
          description: The text of an option.
          example: cat
        follow_up_questions:
          type: array
          items:
            type: integer
            format: int64
          description: The IDs of the follow-up questions to an option
          example: [1, 2]
        weight:
          type: integer
          description: Adds importance weight to an option.
          example: 1
        reference_id:
          type: string
          description: Attribute for options filtering
          example: Important Options
    minItems: 1
    uniqueItems: true
    example:
      - reference_id: cat option
        text: cat
        weight: 2
      - reference_id: dog option
        text: dog
        weight: 1
        follow_up_questions: [1, 2]
      - reference_id: dragon option
        text: dragon
        follow_up_questions: [3]
  question_id:
    type: integer
    description: Id of the question.
    example: 77
ChoiceQuestionFullAttributes: &ChoiceQuestionFullAttributes
  type: object
  description: The attributes associated with the resource.
  properties:
    <<: *ChoiceQuestionBaseAttributes
    <<: *ChoiceQuestionItemType
    created_at:
      type: string
      description: The date the question was created.
      example: '2019-02-09T13:17:26Z'
      format: date-time
    updated_at:
      type: string
      description: The date the question was updated.
      example: '2019-03-18T22:02:05Z'
      format: date-time
ChoiceQuestion: &ChoiceQuestion
  type: object
  description: The data associated with the resource.
  required:
    - id
    - type
    - attributes
    - relationships
  properties:
    id:
      type: string
      description: The ID of the requested resource.
      example: '20'
    type:
      type: string
      description: The classification of the object (`"questions"`).
      example: questionnaire_items
    attributes: *ChoiceQuestionFullAttributes
    relationships:
      type: object
      description: The relationships associated with the resource.
      required:
        - questionnaire
      properties:
        questionnaire:
          $ref: '../../components/schemas.yml#/RelationshipObject'
      example:
        questionnaire:
          data:
            id: '1'
            type: questionnaires
CreateChoiceQuestionPayload:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - type
        - attributes
      properties:
        type:
          type: string
          description: The classification of the object (`"questions"`).
          example: questionnaire_items
        attributes:
          type: object
          description: The attributes associated with the resource.
          required:
            - text
            - item_type
            - options
          properties:
            <<: *ChoiceQuestionBaseAttributes
            <<: *ChoiceQuestionItemType
UpdateChoiceQuestionPayload:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - id
        - type
        - attributes
      properties:
        id:
          type: string
          description: The ID of the requested resource.
          example: '20'
        type:
          type: string
          description: The classification of the object (`"questions"`).
          example: questionnaire_items
        attributes:
          type: object
          description: The attributes associated with the resource.
          properties:
            <<: *ChoiceQuestionBaseAttributes
SingleChoiceQuestionResponse:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data: *ChoiceQuestion
