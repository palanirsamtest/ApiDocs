ComplianceMapping: &ComplianceMapping
  type: object
  description: The data associated with the resource.
  required:
    - id
    - type
    - attributes
  properties:
    id: &id
      type: string
      description: The ID of the requested resource.
      example: '1'
    type: &type
      type: string
      description: The classification of the object (`"compliance_mappings"`).
      example: compliance_mappings
    attributes: &attributes
      type: object
      description: The attributes associated with the resource.
      required:
        - coverage
      properties:
        coverage: &coverage
          type: integer
          minimum: 1
          maximum: 100
          description: Coverage percentage.
          example: 75
        created_at: &created_at
          type: string
          description: The timestamp specifying when the mapping was created.
          example: '2019-02-09T13:17:26Z'
          format: date-time
        updated_at: &updated_at
          type: string
          description: The timestamp specifying when the mapping was updated.
          example: '2019-03-18T22:02:05Z'
          format: date-time
    relationships: &relationships
      type: object
      description: The relationships associated with the resource.
      properties:
        compliance_requirement: &compliance_requirement
          type: object
          description: Requirement object.
          required:
            - data
          properties:
            data:
              type: object
              description: The data associated with the resource.
              required:
                - id
                - type
              properties:
                id: *id
                type:
                  type: string
                  description: The classification of the object (`"compliance_requirements"`).
                  example: compliance_requirements
        control: &control
          type: object
          description: Control object.
          required:
            - data
          properties:
            data:
              type: object
              description: The data associated with the resource.
              required:
                - id
                - type
              properties:
                id: *id
                type:
                  type: string
                  description: The classification of the object (`"controls"`).
                  example: controls

ComplianceMappingIncludes: &ComplianceMappingIncludes
  type: array
  description: Included resources.
  items:
    type: object
  example:
    - id: 2
      type: compliance_requirements
      attributes:
        name: My requirement

GetComplianceMappingResponseWithIncludes:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data: *ComplianceMapping
    included: *ComplianceMappingIncludes

UpdateComplianceMappingRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - id
        - type
      properties:
        id: *id
        type: *type
        attributes:
          type: object
          description: The attributes associated with the resource.
          properties:
            coverage: *coverage

CreateComplianceMappingRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - type
        - relationships
      properties:
        type: *type
        attributes:
          type: object
          description: The attributes associated with the resource.
          properties:
            coverage: *coverage
        relationships:
          type: object
          description: The relationships associated with the resource.
          required:
            - compliance_requirement
            - control
          properties:
            compliance_requirement: *compliance_requirement
            control: *control
