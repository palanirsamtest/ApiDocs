ComplianceRequirement: &ComplianceRequirement
  type: object
  description: The data associated with the resource.
  required:
    - id
    - type
    - attributes
  properties:
    id: &id
      type: string
      description: The ID of the requested resource.
      example: '1'
    type: &type
      type: string
      description: The classification of the object (`"compliance_requirements"`).
      example: compliance_requirements
    attributes: &attributes
      type: object
      description: The attributes associated with the resource.
      properties:
        name: &name
          type: string
          description: The name of the compliance requirement.
          maxLength: 255
          example: My requirement
        identifier: &identifier
          type: string
          description: The identifier of the compliance requirement.
          example: REQ-1
        description: &description
          type: string
          description: The detailed description of the requirement.
          maxLength: 524288
          example: Requirement details
        created_at: &created_at
          type: string
          description: The timestamp specifying when the requirement was created.
          example: '2019-02-09T13:17:26Z'
          format: date-time
        updated_at: &updated_at
          type: string
          description: The timestamp specifying when the requirement was updated.
          example: '2019-03-18T22:02:05Z'
          format: date-time
        external_id: &externalId
          type: string
          description: An optional identifier.
          example: EXT-1
        external_parent_id: &externalParentId
          type: string
          description: An optional identifier of parent.
          example: EXT-2
        tags: &tags
          type: array
          description: List of applied tags. Must use elements from regulation's `available_tags`.
          items:
            type: string
            description: Tag
            example: foo
        rationale: &rationale
          type: string
          description: Rationale.
          maxLength: 524288
          example: Requirement rationale
        applicable:
          type: boolean
          description: Indicates whether requirement is covered/applicable.
          example: true
        covered:
          type: boolean
          description: Indicates whether requirement is covered/applicable.
          example: true
        coverage:
          type: number
          description: Coverage percentage.
          example: 0.8
    relationships:
      type: object
      description: The relationships associated with the resource.
      properties:
        compliance_regulation:
          type: object
          description: Parent regulation object.
          required:
            - data
          properties:
            data:
              type: object
              description: The data associated with the resource.
              required:
                - id
                - type
              properties:
                id: *id
                type:
                  type: string
                  description: The classification of the object (`"compliance_regulations"`).
                  example: compliance_regulations
        parent: &parent
          type: object
          description: Parent requirement object.
          required:
            - data
          properties:
            data:
              type: object
              description: The data associated with the resource.
              required:
                - id
                - type
              properties:
                id: *id
                type:
                  type: string
                  description: The classification of the object (`"compliance_requirements"`).
                  example: compliance_requirements
        compliance_mappings: &complianceMappings
          type: object
          description: Related control mappings.
          required:
            - data
          properties:
            data:
              type: array
              description: The data associated with the resource.
              items:
                type: object
                required:
                  - id
                  - type
                properties:
                  id: *id
                  type:
                    type: string
                    description: The classification of the object (`"compliance_mappings"`).
                    example: compliance_mappings
    links:
      type: object
      description: Resource links.
      properties:
        ui:
          type: string
          description: Link to the requirement in UI.
          example: 'https://test-org.compliance-maps.highbond.com/standard/1/requirement/2/edit'

ComplianceRequirementIncludes: &ComplianceRequirementIncludes
  type: array
  description: Included resources.
  items:
    type: object
  example:
    - id: 1
      type: compliance_regulation
      attributes:
        name: My regulation
    - id: 2
      type: compliance_requirements
      attributes:
        name: Parent requirement
    - id: 1
      type: compliance_mappings
      attributes:
        coverage: 75
      relationships:
        control:
          id: 1
          type: controls

GetComplianceRequirementResponseWithIncludes:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data: *ComplianceRequirement
    included: *ComplianceRequirementIncludes

Links: &Links
  type: object
  required:
    - next
    - prev
  properties:
    next:
      type: string
      description: Next page url
      nullable: true
      example: '/api/resource?page[number]=Mg=='
    prev:
      type: string
      description: Previous page url
      nullable: true
      example: null

GetComplianceRequirementsResponseWithIncludes:
  type: object
  description: The data associated with the resource.
  required:
    - data
    - links
  properties:
    data:
      type: array
      description: Array of compliance regulations
      items: *ComplianceRequirement
    included: *ComplianceRequirementIncludes
    links: *Links

UpdateComplianceRequirementRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - id
        - type
      properties:
        id: *id
        type: *type
        attributes:
          type: object
          description: The attributes associated with the resource.
          properties:
            name: *name
            identifier: *identifier
            description: *description
            external_id: *externalId
            external_parent_id: *externalParentId
            tags: *tags
            rationale: *rationale

CreateComplianceRequirementRequest:
  type: object
  description: The data associated with the resource.
  required:
    - data
  properties:
    data:
      type: object
      description: The data associated with the resource.
      required:
        - type
        - attributes
      properties:
        type: *type
        attributes:
          type: object
          description: The attributes associated with the resource.
          required:
            - identifier
            - description
          properties:
            name: *name
            identifier: *identifier
            description: *description
            external_id: *externalId
            external_parent_id: *externalParentId
            tags: *tags
            rationale: *rationale
        relationships:
          type: object
          description: The relationships associated with the resource.
          properties:
            parent: *parent
